# 🔍 排查搜索失败问题

网站可以访问，但搜索功能失败。这通常是API连接问题。

---

## 🎯 快速排查步骤

### 步骤1：检查浏览器控制台

1. **打开开发者工具**
   - 按 `F12` 键
   - 切换到 **"Console"** 标签

2. **查看错误信息**
   - 查找红色错误信息
   - 特别关注：
     - API请求失败
     - CORS错误
     - 404错误
     - 网络错误

3. **告诉我错误信息**
   - 复制错误信息
   - 告诉我具体内容

---

### 步骤2：检查Network请求

1. **切换到Network标签**
   - 在开发者工具中
   - 点击 **"Network"** 标签

2. **尝试搜索**
   - 在网站中点击"搜索并加载图谱"
   - 查看Network标签中的请求

3. **查找API请求**
   - 查找以 `/api/` 开头的请求
   - 查看请求状态：
     - **红色** = 失败
     - **200** = 成功
     - **404** = 未找到
     - **500** = 服务器错误
     - **CORS错误** = 跨域问题

4. **点击失败的请求**
   - 查看请求URL
   - 查看响应内容
   - 告诉我详细信息

---

## 🔍 常见问题及解决方案

### 问题1：404错误（未找到）

**可能原因：**
- `VITE_API_URL` 配置错误
- URL格式不正确
- 后端路由问题

**检查：**
1. 在Vercel检查 `VITE_API_URL` 环境变量
2. 确认格式：`https://xxx.up.railway.app/api`
3. 确认URL后面有 `/api`

**解决：**
- 检查并修正Vercel环境变量
- 重新部署前端

---

### 问题2：CORS错误（跨域）

**可能原因：**
- Railway的 `FRONTEND_URL` 配置错误
- 前后端URL不匹配

**检查：**
1. 在Railway检查 `FRONTEND_URL` 环境变量
2. 确认是：`https://tcm-knowledge-graph-jr76.vercel.app`
3. 确认没有多余的斜杠

**解决：**
- 更新Railway的 `FRONTEND_URL`
- 重新部署后端

---

### 问题3：500错误（服务器错误）

**可能原因：**
- 后端服务器错误
- 数据库连接失败
- 代码错误

**检查：**
1. 查看Railway Logs
2. 检查Neo4j连接
3. 查看错误详情

**解决：**
- 查看Railway部署日志
- 检查环境变量配置
- 修复代码错误

---

### 问题4：网络错误（无法连接）

**可能原因：**
- Railway后端未运行
- 后端URL错误
- 网络问题

**检查：**
1. 检查Railway部署状态
2. 确认后端正在运行
3. 测试后端URL是否可以访问

**解决：**
- 确保Railway服务正在运行
- 检查后端URL是否正确

---

## 🎯 立即检查

### 现在立即操作：

1. **打开浏览器开发者工具（F12）**
   - 切换到Console标签
   - 查看错误信息

2. **切换到Network标签**
   - 尝试搜索
   - 查看API请求状态

3. **告诉我：**
   - Console中的错误信息
   - Network中API请求的状态码
   - 请求的URL是什么

---

## 📋 需要检查的信息

请告诉我：

1. **Console错误信息**
   - 复制完整的错误信息

2. **Network请求状态**
   - API请求的状态码（200/404/500等）
   - 请求的URL

3. **Railway后端状态**
   - 后端是否正在运行
   - 是否有错误日志

---

## 🔧 快速修复尝试

### 如果看到404错误：

1. **检查Vercel环境变量**
   - Settings → Environment Variables
   - 确认 `VITE_API_URL` 正确
   - 格式：`https://xxx.up.railway.app/api`

2. **重新部署**
   - 手动触发Redeploy
   - 等待部署完成

### 如果看到CORS错误：

1. **检查Railway环境变量**
   - Variables → `FRONTEND_URL`
   - 确认是：`https://tcm-knowledge-graph-jr76.vercel.app`

2. **重新部署后端**
   - Railway会自动重新部署

---

## 🎯 现在操作

1. **按F12打开开发者工具**
2. **查看Console和Network标签**
3. **告诉我具体的错误信息**

我会根据错误信息帮您解决问题！

