# 中医知识图谱系统 - 用户操作手册

版本：v1.0.0  
发布日期：2025-01-24  
适用范围：中医知识图谱Web应用（前端端口3000，后端端口3001）

---

## 1. 系统简介

中医知识图谱系统是一套面向中医教学、临床研究和知识探索的可视化平台。系统基于Neo4j图数据库，提供仪表板、图谱探索、智能搜索、数据分析、可视化和节点详情等功能模块，并支持2D/3D知识图谱展示与多维度统计分析。

---

## 2. 快速上手

### 2.1 登录与访问
1. 启动后端：`backend` 目录执行 `npm run dev`（开发）或 `npm start`（生产）。
2. 启动前端：`frontend` 目录执行 `npm run dev`，浏览器访问 http://localhost:3000。
3. 默认无需登录即可使用，如需接入认证，可在后端开启JWT模块。

### 2.2 主界面导航
- **顶部导航栏**：展示品牌Logo及全局状态。
- **左侧菜单**：
  - 首页仪表板
  - 图谱探索器
  - 智能搜索
  - 数据分析
  - 可视化中心
  - 节点详情（通过链接进入）
- **主内容区**：展示当前模块内容。

---

## 3. 功能模块操作指南

### 3.1 首页仪表板
- 查看节点总数、关系总数、数据完整度等指标。
- 点击“前往探索”“查看分析”等快捷按钮跳转其他模块。
- 遇到“加载失败”提示时点击刷新或检查后端服务。

### 3.2 图谱探索器
1. 进入“图谱探索器”。
2. 左侧面板选择根节点或分类。
3. 在画布上拖拽、缩放、双击节点展开子节点。
4. 点击节点右上角操作按钮可高亮、固定、导出数据。
5. 右侧面板展示节点详情与关系列表。

#### 常用操作
- 滚轮缩放、右键拖动画布。
- 使用布局选择器切换力导向、同心、层级等布局。
- 打开筛选器可按分类、级别隐藏部分节点。

### 3.3 智能搜索
1. 在搜索栏输入节点代码或名称关键字。
2. 使用高级筛选（分类、层级、是否有子节点等）精确匹配。
3. 点击搜索结果跳转至节点详情或在图谱中定位该节点。
4. 支持导出搜索结果为CSV。

### 3.4 数据分析
- 仪表卡：展示节点增长、类别分布、层级分布等指标。
- 图表区域：包含柱状图、饼图、折线图，多图可导出图片或数据。
- “刷新”按钮重新获取实时数据；“导出报表”可生成 JSON/CSV 文件。

### 3.5 可视化中心
- **2D知识图谱**：基于Cytoscape，支持虚拟化渲染与性能优化。
- **3D知识图谱**：基于Three.js，支持旋转、缩放、悬浮提示。
- **时间线 / 演化图**：用于观察节点随时间变化的趋势。
- 操作提示：
  - 3D视图中按住鼠标左键旋转，右键平移，滚轮缩放。
  - 开启“显示标签”“高亮路径”等开关辅助分析。

### 3.6 节点详情
- 展示节点基础信息（代码、名称、分类、属性）。
- 显示父节点、子节点列表与数量统计。
- “在图谱中定位”按钮可回到探索器并定位目标节点。
- 支持复制节点信息、导出为JSON。

---

## 4. 常见任务

| 任务 | 路径 |
|------|------|
| 查看系统总体情况 | 首页仪表板 |
| 查找指定节点 | 智能搜索 → 点击结果 |
| 浏览知识图谱 | 图谱探索器 / 可视化中心 |
| 下载统计报表 | 数据分析 → 导出按钮 |
| 导出节点关系 | 节点详情 → 导出JSON |
| 切换2D/3D视图 | 可视化中心 → 选择视图 |

---

## 5. 操作建议

1. **性能优化**：一次展开节点数量不宜过多，可使用过滤器限制范围。
2. **数据导出**：大规模导出建议使用后端脚本或API。
3. **3D可视化**：推荐在支持WebGL的现代浏览器中使用（Chrome/Edge）。
4. **异常处理**：若出现“数据库未连接”，检查Neo4j服务或环境变量。
5. **自定义配置**：可在 `frontend/src/services/api.ts` 和 `.env` 中调整API地址。

---

## 6. 常见问题 FAQ

### Q1: 页面提示“加载数据失败”？
**A**：确认后端 `server-simple.js` 是否运行；访问 `http://localhost:3001/health` 检查健康状态。

### Q2: 图谱渲染缓慢？
**A**：使用“虚拟化渲染”或“层级展开”功能，减少一次性显示的节点数量。

### Q3: 如何导出节点信息？
**A**：在节点详情页面点击“导出JSON”或使用API `/api/nodes/{code}` 获取原始数据。

### Q4: 能否自定义分类颜色？
**A**：在 `frontend/src/components/graph/CytoscapeGraph.tsx` 中调整颜色映射表。

---

## 7. 用户支持

- 项目地址：`C:\Users\31600\Desktop\tcm-knowledge-graph`
- 后端文档：`http://localhost:3001/api-docs`
- 联系方式：请通过项目维护人或Git仓库Issue反馈。

---

**最后更新**：2025-01-24  
**维护人**：中医知识图谱项目组

