# 🚀 下一步：获取后端地址并连接前后端

所有环境变量已配置完成！现在需要获取后端地址并连接前后端。

---

## ✅ 当前状态

- ✅ 前端已部署到Vercel
- ✅ 前端地址：https://tcm-knowledge-graph-jr76.vercel.app
- ✅ Railway环境变量已全部添加
- ⏭️ 需要获取Railway后端URL
- ⏭️ 需要在Vercel添加API地址

---

## 🎯 步骤1：获取Railway后端URL

### 操作：

1. **在Railway服务页面**
   - 确保您在 `tcm-knowledge-graph` 服务页面
   - 点击顶部的 **"Settings"** 标签

2. **进入Networking部分**
   - 在右侧快速导航中，点击 **"Networking"**
   - 或向下滚动到 "Networking" 部分

3. **生成公共域名**
   - 在 "Public Networking" 部分
   - 点击 **"Generate Domain"** 按钮
   - Railway会生成一个URL
   - 类似：`https://tcm-knowledge-graph-production-xxx.up.railway.app`

4. **复制后端URL**
   - 复制生成的URL
   - **保存这个URL**，稍后需要在Vercel使用

### 如果已有域名：

- 在 "Public Networking" 部分查看
- 应该已经显示了一个URL
- 直接复制即可

---

## 🎯 步骤2：检查部署状态

### 操作：

1. **查看Deployments标签**
   - 点击顶部的 **"Deployments"** 标签
   - 查看最新的部署状态

2. **确认部署成功**
   - 状态应该是 "Running" 或 "Active"（绿色）
   - 如果还在 "Building"，等待完成

3. **查看Logs（可选）**
   - 点击 **"Logs"** 标签
   - 应该看到服务启动成功的日志
   - 类似：`Server running on port 3001`
   - 没有错误信息

---

## 🎯 步骤3：在Vercel添加API地址

### 操作：

1. **回到Vercel**
   - 访问：https://vercel.com/dashboard
   - 进入 `tcm-knowledge-graph-jr76` 项目

2. **进入环境变量设置**
   - 点击 **"Settings"** 标签
   - 点击 **"Environment Variables"**

3. **添加VITE_API_URL**
   - 点击 **"Add New"** 按钮
   - 设置：
     ```
     Name: VITE_API_URL
     Value: https://您的Railway后端URL/api
     ```
   - **重要：** 需要在Railway URL后面加上 `/api`
   - **示例：** 如果Railway URL是 `https://xxx.up.railway.app`
   - 那么Value应该是：`https://xxx.up.railway.app/api`
   - 选择所有环境（Production, Preview, Development）
   - 点击 **"Save"**

4. **等待重新部署**
   - Vercel会自动检测到环境变量更改
   - 会自动触发新的部署
   - 或手动点击 "Deployments" → 最新部署 → "Redeploy"

---

## 🎯 步骤4：测试网站

### 操作：

1. **访问前端网站**
   - 打开：https://tcm-knowledge-graph-jr76.vercel.app
   - 检查页面是否正常加载

2. **打开浏览器开发者工具**
   - 按 `F12` 键
   - 切换到 **"Console"** 标签

3. **测试搜索功能**
   - 尝试搜索一个中医术语
   - 查看是否有API请求
   - 检查是否有错误

4. **查看Network标签**
   - 切换到 **"Network"** 标签
   - 刷新页面
   - 查看是否有 `/api/` 开头的请求
   - 检查请求状态（应该是200）

---

## 📋 操作清单

### 现在立即操作：

- [ ] 在Railway获取后端URL（Networking → Generate Domain）
- [ ] 检查Railway部署状态（Deployments标签）
- [ ] 在Vercel添加VITE_API_URL环境变量
- [ ] 等待Vercel重新部署
- [ ] 访问前端网站测试功能

---

## ✅ 完成后

如果一切正常，您应该：

1. ✅ **前端可以访问**
   - URL: https://tcm-knowledge-graph-jr76.vercel.app
   - 页面正常加载

2. ✅ **前后端正常连接**
   - API请求成功
   - 搜索功能正常
   - 知识图谱可以显示

3. ✅ **数据库连接正常**
   - Neo4j连接成功
   - 数据可以查询

---

## 🆘 如果遇到问题

### 后端无法访问？

- 检查Railway部署状态是否为 "Running"
- 查看Railway Logs是否有错误
- 确认Networking中已生成公共域名

### 前端无法连接后端？

- 检查Vercel的VITE_API_URL是否正确
- 确认URL后面有 `/api`
- 检查浏览器控制台的错误信息

### API请求失败？

- 检查CORS配置
- 确认FRONTEND_URL环境变量正确
- 查看Railway Logs中的错误

---

## 🎯 现在开始

1. **获取Railway后端URL**
   - Networking → Generate Domain
   - 复制URL

2. **在Vercel添加VITE_API_URL**
   - Settings → Environment Variables
   - 添加：`VITE_API_URL = https://您的Railway后端URL/api`

3. **测试网站**
   - 访问前端地址
   - 测试功能

完成后告诉我结果！🚀

