# 🚀 下一步：部署到公网

您的项目已在GitHub：`https://github.com/shaonayan/tcm-knowledge-graph`

现在需要部署前端和后端，让网站可以在公网访问。

---

## 📋 部署步骤概览

1. ✅ **已完成**：项目已上传到GitHub
2. ⏭️ **下一步**：在Vercel部署前端
3. ⏭️ **然后**：在Railway部署后端
4. ⏭️ **最后**：配置环境变量和测试

---

## 🌐 步骤1：在Vercel部署前端（5分钟）

### 操作步骤：

1. **访问Vercel并导入仓库**
   - 打开：https://vercel.com/new
   - 在"导入 Git 仓库"区域，搜索 `tcm-knowledge-graph`
   - 或直接搜索 `shaonayan/tcm-knowledge-graph`
   - 点击"进口"（Import）按钮

2. **配置项目设置**
   - **Framework Preset**: 选择 `Vite`
   - **Root Directory**: 输入 `frontend`
   - **Build Command**: `npm run build`
   - **Output Directory**: `dist`
   - **Install Command**: `npm install`

3. **添加环境变量**
   - 点击"Environment Variables"
   - 添加：
     ```
     VITE_API_URL=https://your-backend-url.com/api
     ```
   - ⚠️ 先留空，等后端部署后再回来修改

4. **部署**
   - 点击"Deploy"
   - 等待构建完成（约2-3分钟）
   - 获得前端地址：`https://xxx.vercel.app`

---

## 🔧 步骤2：在Railway部署后端（10分钟）

### 操作步骤：

1. **访问Railway并登录**
   - 打开：https://railway.app
   - 使用GitHub账号登录

2. **创建新项目**
   - 点击"New Project"
   - 选择"Deploy from GitHub repo"
   - 搜索并选择 `tcm-knowledge-graph` 仓库

3. **配置服务**
   - Railway会自动检测到项目
   - 需要手动配置：
     - **Root Directory**: `backend`
     - **Start Command**: `node server-simple.js` 或 `npm start`

4. **添加环境变量**
   点击"Variables"标签，添加：
   ```env
   NODE_ENV=production
   PORT=3001
   NEO4J_URI=neo4j+s://your-neo4j-uri
   NEO4J_USER=neo4j
   NEO4J_PASSWORD=your-neo4j-password
   FRONTEND_URL=https://your-frontend.vercel.app
   ```

5. **部署**
   - Railway会自动开始部署
   - 等待部署完成
   - 获得后端地址：`https://xxx.up.railway.app`

---

## 🔗 步骤3：连接前后端

### 更新前端环境变量：

1. **回到Vercel项目设置**
   - 进入您的Vercel项目
   - 点击"Settings" → "Environment Variables"
   - 编辑 `VITE_API_URL`：
     ```
     VITE_API_URL=https://your-backend-url.up.railway.app/api
     ```
   - 保存并重新部署

### 更新后端环境变量：

1. **回到Railway项目设置**
   - 编辑 `FRONTEND_URL`：
     ```
     FRONTEND_URL=https://your-frontend.vercel.app
     ```
   - 保存后会自动重新部署

---

## ✅ 步骤4：测试网站

1. **访问前端地址**
   - 打开Vercel提供的前端URL
   - 检查页面是否正常加载

2. **测试功能**
   - 尝试搜索功能
   - 查看知识图谱
   - 检查API连接

3. **检查控制台**
   - 打开浏览器开发者工具（F12）
   - 查看Console是否有错误
   - 查看Network标签，确认API请求正常

---

## 🎯 快速操作清单

### Vercel部署前端：
- [ ] 访问 https://vercel.com/new
- [ ] 导入 `tcm-knowledge-graph` 仓库
- [ ] 配置：Framework=Vite, Root=frontend, Output=dist
- [ ] 部署并获取前端地址

### Railway部署后端：
- [ ] 访问 https://railway.app
- [ ] 创建项目并导入仓库
- [ ] 配置Root Directory为 `backend`
- [ ] 添加环境变量（Neo4j连接信息）
- [ ] 部署并获取后端地址

### 连接配置：
- [ ] 在Vercel添加 `VITE_API_URL` 环境变量
- [ ] 在Railway添加 `FRONTEND_URL` 环境变量
- [ ] 重新部署前端和后端

### 测试验证：
- [ ] 访问前端URL
- [ ] 测试搜索功能
- [ ] 检查知识图谱显示
- [ ] 验证API连接

---

## 🔍 需要准备的信息

在开始部署前，请准备好：

1. **Neo4j连接信息**
   - URI: `neo4j+s://xxx.databases.neo4j.io`
   - 用户名: `neo4j`
   - 密码: （您的Neo4j密码）

2. **GitHub仓库地址**
   - ✅ 已有：`https://github.com/shaonayan/tcm-knowledge-graph`

---

## ❓ 遇到问题？

### 前端部署失败？
- 检查Root Directory是否正确（应该是 `frontend`）
- 确认Build Command是 `npm run build`
- 查看Vercel的构建日志

### 后端部署失败？
- 检查Root Directory是否正确（应该是 `backend`）
- 确认环境变量都已配置
- 查看Railway的部署日志

### API连接失败？
- 检查CORS配置
- 确认前后端URL都正确
- 检查环境变量是否生效

---

## 🎉 完成后

部署成功后，您将拥有：
- ✅ 公网可访问的前端网站
- ✅ 运行在云端的后端API
- ✅ 完整的知识图谱系统

可以分享给其他人访问了！🚀

